**************************************************************************************
Instructions/Information on Autotools (Autoconf & Automake) for entropy
Paula Adams      last update - June 20, 2013
**************************************************************************************

--TO INSTALL--
HDF5 and GSL are required to run entropy. Without them configure will not work. 

--If these modules are installed in a standard location, you will be able to install entropy with three commands: 
	./configure
	make
	make install      --OR--     make install --prefix=location

	* By default, ‘make install’ installs the package's commands under /usr/local/bin 
	You can specify an installation prefix other than /usr/local by giving configure
 	the option --prefix=location, where location must be an absolute file name.

--If you are working on a system that allows you to load modules you will can add them 
with commands such as:
	module load GSL/gsl-1.15_intel
	module load HDF5/hdf5-1.8.9_intel
	module load INTEL/2012.0.032/compilers

In this case gsl was installed in a non-standard location. To check for the location of 
gsl you can run these checks 
	$ gsl-config --cflags
	-I/usr/local/include
	$ gsl-config --libs
	-L/usr/local/lib -lgsl -lgslcblas

If gsl is installed in a non-standard location, use the gsl-config checks above to get the
correct compiler flags and use the following scripts (with your unique locations) instead:

	./configure CPPFLAGS=-I/usr/local/include LDFLAGS=-L/usr/local/lib
	make
	make install      --OR--     make install --prefix=location



--TO UNINSTALL--
	make uninstall

--OTHER COMMANDS--
After you have ran ./configure and make there are other commands you can do to check 
the status of each step:

	make clean - erases anything made by the command 'make'
	make distclean - erases anything created by './configure'
	make dist - recreate and 'PACKAGE-VERSION.tar.gz' from all the source files

* Other commands can be found in the automake manual

***************************************************************************************
--THE FILES--

When you initially get entropy you should have the following files

entropy files:
	entropy.h
	estpost_h5_entropy.c
	func.C
	main.C
	/CVS
autoconf files:
	configure*
	configure.ac
	config.h.in
	Makefile.am	
	Makefile.in
	install-sh*
	missing*
	depcomp*
        aclocal.m4
        
after running './configure' you should have added: 
	Makefile
	config.h
	config.status*
	config.log
	stamp-h1      //A timestamp - not that important

after running 'make' you should have added:
	aclocal.m4
	autom4t2.cache/
	func.o
	main.o
	entropy* 

Unfortunately all of these files are important and are doing some kind of background work for ./configure, make, and make install. More information on these files can be found in the automake and autoconf manuals.


****************************************************************************************

--HOW TO ADAPT THESE FILES FOR OTHER PROGRAMS--
If you wanted to adapt these files to another program,  you should copy(or re-write) configure.ac and Makefile.am. These are the only two files that you write. The rest are generated by auto tools as you go on. All of the macros should work, you just need to add and take away marcos to fit the new project. 

--configure.ac--
configure.ac is the big one. This is where all of the checks are found, and all of these checks lead to the creation of the makefile and instructions for compilation. 

configure.ac has lots of comments so that hopefully you can read through it and figure out what each line is checking for. 

AC_INIT([entropy], [1.0]) - is the first line and is required for all configure.ac files
				entropy is the future ./entropy command and 1.0 is the 					version of autoconf. You would want to change 'entropy' to 				whatever name you want to use for the new project
AC_INIT_AUTOMAKE([-Wall foreign]) - is the initiation for automake and is also required.

AC_OUTPUT is is also a required line at the end of the configure.ac. It creates/updates 				the files config.h, config.h.in, and config.status
				which are used by automake 

In between those two at the beginning and AC_OUTPUT at the end are macros checking for language, HDF5, GSL, headers, libraries, etc. These can be changed based on what your new program needs. 

--Makefile.am--
Makefile.am is only other file that you should need to look at. 
	bin_PROGRAMS is the name of the program you are going to make
	entropy_SOURCES is where you list the files you need to compile (change 			entropy to the name of your new program)

	AM_CXXFLAGS = $(GSL_CFLAGS)
  &	AM_LDFLAGS = $(GSL_LIBS)
       	are two lines that are just making sure that gsl-config --libs are added to 
	compiler flags. They may not be needed for your program. 

--Creating 'configure*'--
After creating your configure.ac and Makefile.am files you should run
	autoreconf --install
to create all the files needed for ./configure, make, make install. 

autoreconf creates the 'configure*' command and compiles autoconf and automake in the correct order. 
'--install' adds the files 'install-sh', 'depcomp', and 'missing' which are needed for installation. 

After running 'autoreconf --install' you should have all the files needed to run the commands './configure', 'make', and 'make install'. 

****************************************************************************************



	




